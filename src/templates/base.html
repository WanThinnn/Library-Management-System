{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}H·ªá th·ªëng Qu·∫£n l√Ω Th∆∞ vi·ªán{% endblock %}</title>
    
    <!-- Apple-inspired Design System CSS -->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    
    <!-- Custom page styles -->
    {% block extra_css %}{% endblock %}
</head>
<body class="page-wrapper">
    <!-- Modern Navigation -->
    <nav class="navbar">
        <div class="navbar-container">
            <a class="navbar-brand" href="{% url 'home' %}">
                <span class="navbar-logo">üìö</span>
                <div class="navbar-title">
                    <span class="navbar-title-main">Qu·∫£n l√Ω Th∆∞ vi·ªán</span>
                    <span class="navbar-title-sub">Library System</span>
                </div>
            </a>
            
            <button class="navbar-toggle" id="navToggle">
                <div class="navbar-toggle-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            
            <ul class="navbar-nav" id="navMenu">
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}">Trang ch·ªß</a>
                </li>

                {% if user.is_authenticated %}
                    <!-- ƒê·ªôc gi·∫£ -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#">ƒê·ªôc gi·∫£</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'reader_create' %}">L·∫≠p th·∫ª ƒë·ªôc gi·∫£</a></li>
                            <li><a class="dropdown-item" href="{% url 'reader_list' %}">Danh s√°ch ƒë·ªôc gi·∫£</a></li>
                        </ul>
                    </li>

                    <!-- S√°ch -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#">S√°ch</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'book_import' %}">Ti·∫øp nh·∫≠n s√°ch</a></li>
                            <li><a class="dropdown-item" href="{% url 'book_search' %}">Tra c·ª©u s√°ch</a></li>
                            <li><a class="dropdown-item" href="{% url 'book_import_list' %}">Phi·∫øu nh·∫≠p s√°ch</a></li>
                        </ul>
                    </li>

                    <!-- M∆∞·ª£n/Tr·∫£ -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#">M∆∞·ª£n/Tr·∫£</a>
                        <ul class="dropdown-menu">
                            <li class="dropdown-header">Cho m∆∞·ª£n s√°ch</li>
                            <li><a class="dropdown-item" href="{% url 'borrow_book' %}">L·∫≠p phi·∫øu m∆∞·ª£n</a></li>
                            <li><a class="dropdown-item" href="{% url 'borrow_book_list' %}">Danh s√°ch phi·∫øu m∆∞·ª£n</a></li>
                            <li class="dropdown-divider"></li>
                            <li class="dropdown-header">Nh·∫≠n tr·∫£ s√°ch</li>
                            <li><a class="dropdown-item" href="{% url 'return_book' %}">L·∫≠p phi·∫øu tr·∫£</a></li>
                            <li><a class="dropdown-item" href="{% url 'return_book_list' %}">Danh s√°ch phi·∫øu tr·∫£</a></li>
                        </ul>
                    </li>

                    <!-- Thu ti·ªÅn -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#">Thu ti·ªÅn</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'receipt_form' %}">L·∫≠p phi·∫øu thu</a></li>
                            <li><a class="dropdown-item" href="{% url 'receipt_list' %}">Danh s√°ch phi·∫øu thu</a></li>
                        </ul>
                    </li>

                    <!-- B√°o c√°o -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#">B√°o c√°o</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'report_borrow_by_category' %}">M∆∞·ª£n theo th·ªÉ lo·∫°i</a></li>
                            <li><a class="dropdown-item" href="{% url 'report_overdue_books' %}">S√°ch tr·∫£ tr·ªÖ</a></li>
                        </ul>
                    </li>

                    {% if user.is_superuser %}
                    <!-- Qu·∫£n tr·ªã -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#">Qu·∫£n tr·ªã</a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{% url 'parameter_update' %}">Thay ƒë·ªïi quy ƒë·ªãnh</a></li>
                            <li class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{% url 'user_list' %}">Qu·∫£n l√Ω ng∆∞·ªùi d√πng</a></li>
                            <li><a class="dropdown-item" href="/admin/">Admin Panel</a></li>
                        </ul>
                    </li>
                    {% endif %}

                    <!-- User menu -->
                    <li class="nav-item dropdown">
                        <a class="navbar-user dropdown-toggle" href="#">
                            {{ user.username }}
                            {% if user.is_superuser %}
                                <span class="user-badge">Admin</span>
                            {% elif user.is_staff %}
                                <span class="user-badge" style="background: var(--color-info);">Staff</span>
                            {% endif %}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li class="dropdown-header">
                                {% if user.is_superuser %}
                                    Qu·∫£n l√Ω
                                {% elif user.is_staff %}
                                    Th·ªß th∆∞
                                {% else %}
                                    Ng∆∞·ªùi d√πng
                                {% endif %}
                            </li>
                            <li class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="{% url 'logout' %}" style="color: var(--color-danger);">ƒêƒÉng xu·∫•t</a></li>
                        </ul>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'book_search' %}">Tra c·ª©u s√°ch</a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-primary btn-sm" href="{% url 'login' %}">ƒêƒÉng nh·∫≠p</a>
                    </li>
                {% endif %}
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="page-content">
        <div class="container">
            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible">
                            {{ message }}
                            <button class="alert-close" onclick="this.parentElement.remove()">√ó</button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            {% block content %}
            {% endblock %}
        </div>
    </div>
    
    <!-- JavaScript -->
    <script src="{% static 'js/main.js' %}"></script>
    {% block extra_js %}{% endblock %}
</body>
</html>