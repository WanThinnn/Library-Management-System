{% extends 'base.html' %}

{% block content %}
<div class="card">
    <h2 class="text-center" style="color: #2c3e50;">ğŸ“š Há»‡ thá»‘ng Quáº£n lÃ½ ThÆ° viá»‡n</h2>

    <p class="text-center" style="color: #7f8c8d; font-size: 1.1rem; margin-top: 1rem;">
        DÃ nh cho Thá»§ thÆ° vÃ  Quáº£n trá»‹ viÃªn
    </p>

    <div class="text-center" style="margin-top: 3rem; padding: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; color: white;">
        {% if user.is_authenticated %}
            <h3 style="margin-bottom: 1rem;">ğŸ‘‹ ChÃ o má»«ng, {{ user.username }}!</h3>
            <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
                {% if user.is_superuser %}
                    Báº¡n Ä‘ang Ä‘Äƒng nháº­p vá»›i quyá»n <strong>Quáº£n trá»‹ viÃªn</strong> (ToÃ n quyá»n)
                {% elif user.is_staff %}
                    Báº¡n Ä‘ang Ä‘Äƒng nháº­p vá»›i quyá»n <strong>NhÃ¢n viÃªn</strong>
                {% endif %}
            </p>

            <!-- Pháº§n 1: CÃ¡c chá»©c nÄƒng chÃ­nh - Táº¡o má»›i / Thá»±c hiá»‡n -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: rgba(255,255,255,0.95); text-align: left; margin-bottom: 1rem; font-size: 1rem; text-transform: uppercase; letter-spacing: 1px;">
                    âœ¨ Chá»©c nÄƒng ChÃ­nh
                </h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 15px;">
                    <!-- Quáº£n lÃ½ Ä‘á»™c giáº£ -->
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" style="background: rgba(255,255,255,0.95); color: #3498db; font-weight: bold; width: 100%; padding: 15px 20px; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" type="button" data-bs-toggle="dropdown">
                            ï¿½ Quáº£n lÃ½ Äá»™c giáº£
                        </button>
                        <ul class="dropdown-menu" style="min-width: 220px;">
                            <li><h6 class="dropdown-header" style="color: #3498db;">Táº¡o má»›i</h6></li>
                            <li><a class="dropdown-item" href="{% url 'reader_create' %}">ğŸ“ Láº­p tháº» Ä‘á»™c giáº£ (YC1)</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><h6 class="dropdown-header" style="color: #3498db;">Xem danh sÃ¡ch</h6></li>
                            <li><a class="dropdown-item" href="{% url 'reader_list' %}">ğŸ“‹ Danh sÃ¡ch Ä‘á»™c giáº£</a></li>
                        </ul>
                    </div>

                    <!-- Quáº£n lÃ½ sÃ¡ch -->
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" style="background: rgba(255,255,255,0.95); color: #e67e22; font-weight: bold; width: 100%; padding: 15px 20px; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" type="button" data-bs-toggle="dropdown">
                            ğŸ“š Quáº£n lÃ½ SÃ¡ch
                        </button>
                        <ul class="dropdown-menu" style="min-width: 220px;">
                            <li><h6 class="dropdown-header" style="color: #e67e22;">Táº¡o má»›i</h6></li>
                            <li><a class="dropdown-item" href="{% url 'book_import' %}">ğŸ“¥ Tiáº¿p nháº­n sÃ¡ch (YC2)</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><h6 class="dropdown-header" style="color: #e67e22;">Tra cá»©u</h6></li>
                            <li><a class="dropdown-item" href="{% url 'book_search' %}">ğŸ” Tra cá»©u sÃ¡ch (YC3)</a></li>
                            <li><a class="dropdown-item" href="{% url 'book_import_list' %}">ğŸ“‹ Danh sÃ¡ch phiáº¿u nháº­p</a></li>
                        </ul>
                    </div>

                    <!-- MÆ°á»£n / Tráº£ sÃ¡ch -->
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" style="background: rgba(255,255,255,0.95); color: #9b59b6; font-weight: bold; width: 100%; padding: 15px 20px; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" type="button" data-bs-toggle="dropdown">
                            ğŸ”„ MÆ°á»£n / Tráº£ SÃ¡ch
                        </button>
                        <ul class="dropdown-menu" style="min-width: 220px;">
                            <li><h6 class="dropdown-header" style="color: #9b59b6;">Cho mÆ°á»£n sÃ¡ch</h6></li>
                            <li><a class="dropdown-item" href="{% url 'borrow_book' %}">â¡ï¸ Láº­p phiáº¿u mÆ°á»£n (YC4)</a></li>
                            <li><a class="dropdown-item" href="{% url 'borrow_book_list' %}">ğŸ“‹ Danh sÃ¡ch phiáº¿u mÆ°á»£n</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><h6 class="dropdown-header" style="color: #9b59b6;">Nháº­n tráº£ sÃ¡ch</h6></li>
                            <li><a class="dropdown-item" href="{% url 'return_book' %}">â¬…ï¸ Láº­p phiáº¿u tráº£ (YC5)</a></li>
                            <li><a class="dropdown-item" href="{% url 'return_book_list' %}">ğŸ“‹ Danh sÃ¡ch phiáº¿u tráº£</a></li>
                        </ul>
                    </div>

                    <!-- Thu tiá»n pháº¡t -->
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" style="background: rgba(255,255,255,0.95); color: #27ae60; font-weight: bold; width: 100%; padding: 15px 20px; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" type="button" data-bs-toggle="dropdown">
                            ğŸ’° Thu Tiá»n Pháº¡t
                        </button>
                        <ul class="dropdown-menu" style="min-width: 220px;">
                            <li><h6 class="dropdown-header" style="color: #27ae60;">Táº¡o phiáº¿u thu</h6></li>
                            <li><a class="dropdown-item" href="{% url 'receipt_form' %}">ğŸ’µ Láº­p phiáº¿u thu tiá»n (YC6)</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><h6 class="dropdown-header" style="color: #27ae60;">Xem danh sÃ¡ch</h6></li>
                            <li><a class="dropdown-item" href="{% url 'receipt_list' %}">ğŸ“‹ Danh sÃ¡ch phiáº¿u thu</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Pháº§n 2: BÃ¡o cÃ¡o vÃ  Quáº£n trá»‹ -->
            <div style="margin-top: 2rem;">
                <h4 style="color: rgba(255,255,255,0.95); text-align: left; margin-bottom: 1rem; font-size: 1rem; text-transform: uppercase; letter-spacing: 1px;">
                    ğŸ“Š BÃ¡o cÃ¡o & Quáº£n trá»‹
                </h4>
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <!-- Xem táº¥t cáº£ danh sÃ¡ch -->
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" style="background: rgba(255,255,255,0.95); color: #34495e; font-weight: bold; padding: 12px 25px; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" type="button" data-bs-toggle="dropdown">
                            ğŸ“Š Xem BÃ¡o cÃ¡o
                        </button>
                        <ul class="dropdown-menu" style="min-width: 220px;">
                            <li><h6 class="dropdown-header">ğŸ“‹ Danh sÃ¡ch</h6></li>
                            <li><a class="dropdown-item" href="{% url 'reader_list' %}">ğŸ‘¥ Danh sÃ¡ch Ä‘á»™c giáº£</a></li>
                            <li><a class="dropdown-item" href="{% url 'book_import_list' %}">ğŸ“š Phiáº¿u nháº­p sÃ¡ch</a></li>
                            <li><a class="dropdown-item" href="{% url 'borrow_book_list' %}">â¡ï¸ Phiáº¿u mÆ°á»£n sÃ¡ch</a></li>
                            <li><a class="dropdown-item" href="{% url 'return_book_list' %}">â¬…ï¸ Phiáº¿u tráº£ sÃ¡ch</a></li>
                            <li><a class="dropdown-item" href="{% url 'receipt_list' %}">ğŸ’° Phiáº¿u thu tiá»n</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><h6 class="dropdown-header">ğŸ“Š BÃ¡o cÃ¡o thá»‘ng kÃª</h6></li>
                            <li><a class="dropdown-item" href="{% url 'report_borrow_by_category' %}">ğŸ“ˆ MÆ°á»£n sÃ¡ch theo thá»ƒ loáº¡i</a></li>
                            <li><a class="dropdown-item" href="{% url 'report_overdue_books' %}">âš ï¸ SÃ¡ch tráº£ trá»…</a></li>
                        </ul>
                    </div>

                    <!-- Quáº£n trá»‹ há»‡ thá»‘ng -->
                    {% if user.is_staff %}
                    <div class="dropdown">
                        <button class="btn dropdown-toggle" style="background: rgba(255,255,255,0.95); color: #e74c3c; font-weight: bold; padding: 12px 25px; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" type="button" data-bs-toggle="dropdown">
                            âš™ï¸ Quáº£n trá»‹
                        </button>
                        <ul class="dropdown-menu" style="min-width: 220px;">
                            <li><a class="dropdown-item" href="{% url 'parameter_update' %}">ğŸ”§ Thay Ä‘á»•i quy Ä‘á»‹nh</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/admin/">âš™ï¸ Admin Panel</a></li>
                        </ul>
                    </div>
                    {% endif %}
                </div>
            </div>

        {% else %}
            <h3 style="margin-bottom: 1rem;">ğŸ” Truy cáº­p Há»‡ thá»‘ng</h3>
            <p style="margin-bottom: 1.5rem; font-size: 1.1rem;">
                Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ sá»­ dá»¥ng cÃ¡c chá»©c nÄƒng quáº£n lÃ½
            </p>
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <a href="{% url 'login' %}" class="btn" style="background: white; color: #667eea; padding: 12px 30px; font-size: 1.1rem; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                    ğŸ”‘ ÄÄƒng nháº­p
                </a>
                <a href="/admin/" class="btn" style="background: white; color: #667eea; padding: 12px 30px; font-size: 1.1rem; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                    âš™ï¸ Admin Panel
                </a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
