{% extends 'base.html' %}

{% block content %}
<div class="card">
    <h2 style="text-align: center; color: #2c3e50;">ChÃ o má»«ng Ä‘áº¿n vá»›i Há»‡ thá»‘ng Quáº£n lÃ½ ThÆ° viá»‡n</h2>
    
    {% if user.is_authenticated %}
        <div style="text-align: center; margin: 2rem 0;">
            <h3>Xin chÃ o, {{ user.first_name|default:user.username }}!</h3>
            <p>Email: {{ user.email }}</p>
            
            {% with user_profile=user.userprofile|default_if_none:None %}
            {% if user_profile and user_profile.is_verified %}
                <div class="alert alert-success">
                    <strong>âœ“ TÃ i khoáº£n Ä‘Ã£ Ä‘Æ°á»£c xÃ¡c thá»±c</strong>
                </div>
            {% else %}
                <div class="alert alert-error">
                    <strong>âš  TÃ i khoáº£n chÆ°a Ä‘Æ°á»£c xÃ¡c thá»±c</strong>
                    <br>
                    <a href="{% url 'resend_verification' %}">Gá»­i láº¡i email xÃ¡c thá»±c</a>
                </div>
            {% endif %}
            {% endwith %}
        </div>
        
        <div style="text-align: center;">
            <h4>TÃ­nh nÄƒng quáº£n lÃ½ thÆ° viá»‡n (Ä‘ang phÃ¡t triá»ƒn):</h4>
            <ul style="list-style: none; padding: 0;">
                <li>ğŸ“š Quáº£n lÃ½ sÃ¡ch</li>
                <li>ğŸ‘¥ Quáº£n lÃ½ thÃ nh viÃªn</li>
                <li>ğŸ”„ MÆ°á»£n/tráº£ sÃ¡ch</li>
                <li>ğŸ“Š BÃ¡o cÃ¡o thá»‘ng kÃª</li>
            </ul>
        </div>
    {% else %}
        <div style="text-align: center; margin: 2rem 0;">
            <p style="font-size: 1.2rem; margin-bottom: 2rem;">
                Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ sá»­ dá»¥ng há»‡ thá»‘ng quáº£n lÃ½ thÆ° viá»‡n.
            </p>
            
            <div>
                <a href="{% url 'login' %}" class="btn" style="margin: 0 10px;">ÄÄƒng nháº­p</a>
                <a href="{% url 'register' %}" class="btn btn-secondary" style="margin: 0 10px;">ÄÄƒng kÃ½</a>
            </div>
        </div>
    {% endif %}
</div>

{% if user.is_authenticated %}
<div class="card">
    <h3>ThÃ´ng tin tÃ i khoáº£n</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px; font-weight: bold;">Há» tÃªn:</td>
            <td style="padding: 10px;">{{ user.first_name }} {{ user.last_name }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px; font-weight: bold;">Username:</td>
            <td style="padding: 10px;">{{ user.username }}</td>
        </tr>
        <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px; font-weight: bold;">Email:</td>
            <td style="padding: 10px;">{{ user.email }}</td>
        </tr>
        {% with user_profile=user.userprofile|default_if_none:None %}
        {% if user_profile and user_profile.phone_number %}
        <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px; font-weight: bold;">Sá»‘ Ä‘iá»‡n thoáº¡i:</td>
            <td style="padding: 10px;">{{ user_profile.phone_number }}</td>
        </tr>
        {% endif %}
        <tr style="border-bottom: 1px solid #ddd;">
            <td style="padding: 10px; font-weight: bold;">NgÃ y tham gia:</td>
            <td style="padding: 10px;">{% if user_profile %}{{ user_profile.created_at|date:"d/m/Y H:i" }}{% else %}{{ user.date_joined|date:"d/m/Y H:i" }}{% endif %}</td>
        </tr>
        {% endwith %}
    </table>
</div>
{% endif %}
{% endblock %}